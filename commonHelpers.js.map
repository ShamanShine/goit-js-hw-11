{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '42476870-3a5632db826cc102513b658b4';\nconst BASE_URL = 'https://pixabay.com';\nconst END_POINT = '/api/';\n\nexport async function searchImages(search) {\n  const PARAMS = `?key=${API_KEY}&q=${search}&image_type=photo&orientation=horizontal&safesearch=true`;\n  const url = `${BASE_URL}${END_POINT}${PARAMS}`;\n\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    const data = await response.json();\n\n    if (data.hits && data.hits.length > 0) {\n      return data;\n    } else {\n      throw new Error('No images found');\n    }\n  } catch (error) {\n    throw new Error('Failed to fetch images from Pixabay API');\n  }\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nconst lightbox = new SimpleLightbox('.img-container a', {\n  overlay: true,\n  overlayOpacity: 0.9,\n  animationSpeed: 1000,\n  scrollZoomFactor: 0.1,\n  navText: ['←', '→'],\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderPic(refs, pics, limit = 9) {\n  refs.infoEl.innerHTML = '';\n\n  if (!pics || pics.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'center',\n      transitionIn: 'fadeInLeft',\n    });\n  } else {\n    pics.slice(0, limit).forEach(pic => {\n      const markup = PicTemplate(pic);\n      refs.infoEl.insertAdjacentHTML('beforeend', markup);\n    });\n\n    lightbox.refresh();\n  }\n}\n\nfunction PicTemplate(pic) {\n  return `<div class=\"image-box\">\n    <div class=\"general-frame\">\n\n        <div class=\"image-container\">\n            <a href=\"${pic.largeImageURL}\" data-lightbox=\"gallery\">\n            <img src=\"${pic.webformatURL}\" alt=\"${pic.tags}\" class=\"my-image\">\n            </a>\n        </div>\n        <div class=\"image-body\">\n            <ul class=\"ul-item\">\n                <li class=\"image-li\">Likes <span style=\"font-weight: normal;\">${pic.likes}</span></li>\n                <li class=\"image-li\">Views <span style=\"font-weight: normal;\">${pic.views}</span></li>\n                <li class=\"image-li\">Comments <span style=\"font-weight: normal;\">${pic.comments}</span></li>\n                <li class=\"image-li\">Downloads <span style=\"font-weight: normal;\">${pic.downloads}</span></li>\n            </ul>\n        </div>\n  </div>\n    </div>`;\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImages } from './js/pixabay-api.js';\nimport { renderPic } from './js/render-functions.js';\n\nconst refs = {\n  formEl: document.querySelector('.search-form'),\n  infoEl: document.querySelector('.img-container'),\n  loader: document.getElementById('.block'),\n};\n\nrefs.formEl.addEventListener('submit', async event => {\n  event.preventDefault();\n  // showLoader(); // Показать индикатор загрузки\n\n  const query = event.target.elements.query.value.trim();\n\n  if (query === '') {\n    iziToast.error({\n      message: 'Please enter a search query',\n      position: 'center',\n      transitionIn: 'fadeInLeft',\n    });\n    return;\n  }\n\n  try {\n    const data = await searchImages(query);\n\n    if (data.hits && data.hits.length > 0) {\n      renderPic(refs, data.hits, 9); // количество изображений для отображения.Надо 9\n    } else {\n      iziToast.error({\n        message: 'No images found for the given query',\n        position: 'center',\n        transitionIn: 'fadeInLeft',\n      });\n    }\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'center',\n      transitionIn: 'fadeInLeft',\n    });\n    // } finally {\n    //   hideLoader(); // Скрыть индикатор загрузки вне зависимости от результата запроса\n  }\n\n  event.target.reset();\n});\n\n// function showLoader() {\n//   refs.loader.style.display = '.block';\n// }\n\n// function hideLoader() {\n//   refs.loader.style.display = 'none';\n// }\n\nconst lightbox = new SimpleLightbox('.img-container', {\n  overlay: true,\n  overlayOpacity: 0.9,\n  animationSpeed: 1000,\n  scrollZoomFactor: 0.1,\n  navText: ['←', '→'],\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n"],"names":["API_KEY","BASE_URL","END_POINT","searchImages","search","PARAMS","url","response","data","lightbox","SimpleLightbox","renderPic","refs","pics","limit","iziToast","pic","markup","PicTemplate","event","query","error"],"mappings":"wvBAAA,MAAMA,EAAU,qCACVC,EAAW,sBACXC,EAAY,QAEX,eAAeC,EAAaC,EAAQ,CACzC,MAAMC,EAAS,QAAQL,CAAO,MAAMI,CAAM,2DACpCE,EAAM,GAAGL,CAAQ,GAAGC,CAAS,GAAGG,CAAM,GAE5C,GAAI,CACF,MAAME,EAAW,MAAM,MAAMD,CAAG,EAChC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,MAAMC,EAAO,MAAMD,EAAS,OAE5B,GAAIC,EAAK,MAAQA,EAAK,KAAK,OAAS,EAClC,OAAOA,EAEP,MAAM,IAAI,MAAM,iBAAiB,CAEpC,MAAe,CACd,MAAM,IAAI,MAAM,yCAAyC,CAC1D,CACH,CCrBA,MAAMC,EAAW,IAAIC,EAAe,mBAAoB,CACtD,QAAS,GACT,eAAgB,GAChB,eAAgB,IAChB,iBAAkB,GAClB,QAAS,CAAC,IAAK,GAAG,EAClB,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAUC,EAAMC,EAAMC,EAAQ,EAAG,CAC/CF,EAAK,OAAO,UAAY,GAEpB,CAACC,GAAQA,EAAK,SAAW,EAC3BE,EAAS,MAAM,CACb,QACE,2EACF,SAAU,SACV,aAAc,YACpB,CAAK,GAEDF,EAAK,MAAM,EAAGC,CAAK,EAAE,QAAQE,GAAO,CAClC,MAAMC,EAASC,EAAYF,CAAG,EAC9BJ,EAAK,OAAO,mBAAmB,YAAaK,CAAM,CACxD,CAAK,EAEDR,EAAS,QAAO,EAEpB,CAEA,SAASS,EAAYF,EAAK,CACxB,MAAO;AAAA;AAAA;AAAA;AAAA,uBAIcA,EAAI,aAAa;AAAA,wBAChBA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,gFAKsBA,EAAI,KAAK;AAAA,gFACTA,EAAI,KAAK;AAAA,mFACNA,EAAI,QAAQ;AAAA,oFACXA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,WAKjG,CCvCA,MAAMJ,EAAO,CACX,OAAQ,SAAS,cAAc,cAAc,EAC7C,OAAQ,SAAS,cAAc,gBAAgB,EAC/C,OAAQ,SAAS,eAAe,QAAQ,CAC1C,EAEAA,EAAK,OAAO,iBAAiB,SAAU,MAAMO,GAAS,CACpDA,EAAM,eAAc,EAGpB,MAAMC,EAAQD,EAAM,OAAO,SAAS,MAAM,MAAM,OAEhD,GAAIC,IAAU,GAAI,CAChBL,EAAS,MAAM,CACb,QAAS,8BACT,SAAU,SACV,aAAc,YACpB,CAAK,EACD,MACD,CAED,GAAI,CACF,MAAMP,EAAO,MAAML,EAAaiB,CAAK,EAEjCZ,EAAK,MAAQA,EAAK,KAAK,OAAS,EAClCG,EAAUC,EAAMJ,EAAK,KAAM,CAAC,EAE5BO,EAAS,MAAM,CACb,QAAS,sCACT,SAAU,SACV,aAAc,YACtB,CAAO,CAEJ,OAAQM,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBN,EAAS,MAAM,CACb,QAAS,kDACT,SAAU,SACV,aAAc,YACpB,CAAK,CAGF,CAEDI,EAAM,OAAO,OACf,CAAC,EAUgB,IAAIT,EAAe,iBAAkB,CACpD,QAAS,GACT,eAAgB,GAChB,eAAgB,IAChB,iBAAkB,GAClB,QAAS,CAAC,IAAK,GAAG,EAClB,aAAc,MACd,aAAc,GAChB,CAAC"}