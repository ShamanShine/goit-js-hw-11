{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '42476870-3a5632db826cc102513b658b4';\nconst BASE_URL = 'https://pixabay.com';\nconst END_POINT = '/api/';\n\nexport async function searchImages(search) {\n  const PARAMS = `?key=${API_KEY}&q=${search}&image_type=photo&orientation=horizontal&safesearch=true`;\n  const url = `${BASE_URL}${END_POINT}${PARAMS}`;\n\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    const data = await response.json();\n\n    if (data.hits && data.hits.length > 0) {\n      return data;\n    } else {\n      throw new Error('No images found');\n    }\n  } catch (error) {\n    throw new Error('Failed to fetch images from Pixabay API');\n  }\n}\n","function PicTemplate(pic) {\n  return `<div class=\"image-box\">\n    <div class=\"image-container\">\n      <a href=\"${pic.largeImageURL}\" data-lightbox=\"gallery\">\n        <img src=\"${pic.webformatURL}\" alt=\"${pic.tags}\" class=\"my-image\">\n      </a>\n    </div>\n    <div class=\"image-body\">\n      <ul>\n        <li class=\"image-like\">Likes ${pic.likes}</li>\n        <li class=\"image-views\">Views ${pic.views}</li>\n        <li class=\"image-Comments\">Comments ${pic.comments}</li>\n        <li class=\"image-Downloads\">Downloads ${pic.downloads}</li>\n      </ul>\n    </div>\n  </div>`;\n}\n\nexport function renderPic(refs, pics) {\n  refs.infoEl.innerHTML = ''; // очищаем предыдущие результаты\n\n  if (!pics || pics.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'center',\n      transitionIn: 'fadeInLeft',\n    });\n  } else {\n    pics.forEach(pic => {\n      const markup = PicTemplate(pic);\n      refs.infoEl.insertAdjacentHTML('beforeend', markup);\n    });\n\n    //     // Инициализация SimpleLightbox после добавления новых элементов\n    //     const lightbox = new SimpleLightbox('.image-box', {\n    //       overlay: true,\n    //       overlayOpacity: 0.9,\n    //       animationSpeed: 1000,\n    //       scrollZoomFactor: 0.1,\n    //       navText: ['←', '→'],\n\n    //       captionsData: 'alt',\n    //       captionDelay: 250,\n    //     });\n    //     lightbox.refresh();\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImages } from './js/pixabay-api.js';\nimport { renderPic } from './js/render-functions.js';\n\nconst refs = {\n  formEl: document.querySelector('.search-form'),\n  infoEl: document.querySelector('.img-container'),\n  allForm: document.querySelector('.block'),\n};\n\nrefs.formEl.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const query = event.target.elements.query.value.trim();\n\n  if (query === '') {\n    iziToast.error({\n      message: 'Please enter a search query',\n      position: 'center',\n      transitionIn: 'fadeInLeft',\n    });\n    return;\n  }\n\n  try {\n    const data = await searchImages(query);\n    renderPic(refs, data.hits);\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'center',\n      transitionIn: 'fadeInLeft',\n    });\n  }\n\n  event.target.reset();\n\n  refs.allForm.scrollIntoView({\n    behavior: 'smooth', // Плавный скроллинг\n    block: 'start', // Выравнивание по верхней границе видимой области\n  });\n});\n\n// Инициализация SimpleLightbox после добавления новых элементов\nconst lightbox = new SimpleLightbox('.image-box', {\n  overlay: true,\n  overlayOpacity: 0.9,\n  animationSpeed: 1000,\n  scrollZoomFactor: 0.1,\n  navText: ['←', '→'],\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nlightbox.refresh();\n"],"names":["API_KEY","BASE_URL","END_POINT","searchImages","search","PARAMS","url","response","data","PicTemplate","pic","renderPic","refs","pics","markup","event","query","iziToast","error","lightbox","SimpleLightbox"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAW,sBACXC,EAAY,QAEX,eAAeC,EAAaC,EAAQ,CACzC,MAAMC,EAAS,QAAQL,CAAO,MAAMI,CAAM,2DACpCE,EAAM,GAAGL,CAAQ,GAAGC,CAAS,GAAGG,CAAM,GAE5C,GAAI,CACF,MAAME,EAAW,MAAM,MAAMD,CAAG,EAChC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,MAAMC,EAAO,MAAMD,EAAS,OAE5B,GAAIC,EAAK,MAAQA,EAAK,KAAK,OAAS,EAClC,OAAOA,EAEP,MAAM,IAAI,MAAM,iBAAiB,CAEpC,MAAe,CACd,MAAM,IAAI,MAAM,yCAAyC,CAC1D,CACH,CCxBA,SAASC,EAAYC,EAAK,CACxB,MAAO;AAAA;AAAA,iBAEQA,EAAI,aAAa;AAAA,oBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,uCAKfA,EAAI,KAAK;AAAA,wCACRA,EAAI,KAAK;AAAA,8CACHA,EAAI,QAAQ;AAAA,gDACVA,EAAI,SAAS;AAAA;AAAA;AAAA,SAI7D,CAEO,SAASC,EAAUC,EAAMC,EAAM,CACpCD,EAAK,OAAO,UAAY,GAEpB,CAACC,GAAQA,EAAK,SAAW,EAC3B,SAAS,MAAM,CACb,QACE,2EACF,SAAU,SACV,aAAc,YACpB,CAAK,EAEDA,EAAK,QAAQH,GAAO,CAClB,MAAMI,EAASL,EAAYC,CAAG,EAC9BE,EAAK,OAAO,mBAAmB,YAAaE,CAAM,CACxD,CAAK,CAeL,CCtCA,MAAMF,EAAO,CACX,OAAQ,SAAS,cAAc,cAAc,EAC7C,OAAQ,SAAS,cAAc,gBAAgB,EAC/C,QAAS,SAAS,cAAc,QAAQ,CAC1C,EAEAA,EAAK,OAAO,iBAAiB,SAAU,MAAMG,GAAS,CACpDA,EAAM,eAAc,EAEpB,MAAMC,EAAQD,EAAM,OAAO,SAAS,MAAM,MAAM,OAEhD,GAAIC,IAAU,GAAI,CAChBC,EAAS,MAAM,CACb,QAAS,8BACT,SAAU,SACV,aAAc,YACpB,CAAK,EACD,MACD,CAED,GAAI,CACF,MAAMT,EAAO,MAAML,EAAaa,CAAK,EACrCL,EAAUC,EAAMJ,EAAK,IAAI,CAC1B,OAAQU,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBD,EAAS,MAAM,CACb,QAAS,kDACT,SAAU,SACV,aAAc,YACpB,CAAK,CACF,CAEDF,EAAM,OAAO,QAEbH,EAAK,QAAQ,eAAe,CAC1B,SAAU,SACV,MAAO,OACX,CAAG,CACH,CAAC,EAGD,MAAMO,EAAW,IAAIC,EAAe,aAAc,CAChD,QAAS,GACT,eAAgB,GAChB,eAAgB,IAChB,iBAAkB,GAClB,QAAS,CAAC,IAAK,GAAG,EAClB,aAAc,MACd,aAAc,GAChB,CAAC,EACDD,EAAS,QAAS"}